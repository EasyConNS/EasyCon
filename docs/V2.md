**新的架构应该是整洁的，模块化的，逻辑与UI分离以便于进行跨平台的GUI开发**

### 待补充

#### 对于与单片机设备的连接：

使用抽象的通讯方法，避免直接依赖usbttl或者蓝牙或者wifi的实现

通讯接口需要实现包括但不限于以下：

* 连接与断开
* 连接状态检测
* 设备自动发现自动连接(设备id的判断)
* 原始数据的收发
* ...

#### 对于连接的协议：

因为当前协议已经实现版本控制所以可以不必兼容旧协议，放开手脚设计吧

协议需要简洁易于实现，要有数据校验保证健壮性。有太多现有项目可供参考

#### 对于脚本功能增强：

在部分兼容v1语法的前提下进行功能扩展

* 增加模块支持，脚本中可导入现存模块（系统模块，用户自定义模块）可使用dll实现（ffi）
* 识图标签格式扩展，可以兼容现有标签格式，增加支持OCR文字的保存（可以无缝更新到现有逻辑中）
* 可以读取特定格式的压缩包文件，识别压缩文件中的脚本和相关标签自动加载
* 脚本执行模块支持lua（NLua）

#### 对于模块划分：

* 连接模块（与单片机的连接，与识图摄像头/OBS的连接）
* 协议模块
* 脚本解析模块（实现脚本相关功能，需要扩展）
* 脚本执行模块（需要连接模块提供连接实例以供执行模块发送命令）
* 虚拟手柄模块（可视化虚拟手柄，提供键盘绑定）
* 配置模块（提供公共配置）
* UI（MVVM）
* ...